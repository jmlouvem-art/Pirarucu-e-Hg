<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Pirarucu Aventureiro</title>

  <link rel="icon" type="image/png" href="logo 2.png" sizes="32x32">
  <link rel="apple-touch-icon" href="logo 2.png">
  <meta name="theme-color" content="#f59e0b">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">

  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      width: 100%;
      font-family: 'Nunito', sans-serif;
      background-color: #0c4a6e;
    }

    #game-container {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      background-color: #0c4a6e;
    }

    canvas {
      display: block;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
    }

    /* Fundo por orienta√ß√£o */
    @media (orientation: landscape) {
      canvas, .modal-water { background-image: url('Fundo pc.png'); }
    }
    @media (orientation: portrait) {
      canvas, .modal-water { background-image: url('Fundo do Lago.png'); }
    }

    .modal { transition: opacity .3s ease-in-out; }
    .particle { position: absolute; pointer-events: none; width: 5px; height: 5px; border-radius: 50%; animation: fade 1s forwards; }
    @keyframes fade { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(.5) translateY(-50px); } }
  </style>
</head>

<body>

<!-- Modal Nome -->
<div id="name-modal" class="modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-[120]">
  <div class="rounded-lg p-6 text-center shadow-xl max-w-sm w-full bg-cover bg-center modal-water">
    <div class="bg-white bg-opacity-80 p-4 shadow-md">
      <div class="flex justify-center mb-4"><img src="logo 2.png" class="w-[210px] h-auto shadow-lg" alt=""></div>
      <h2 class="text-2xl font-bold mb-4">üêü Bem-vindo!</h2>
      <p class="mb-4">Digite seu nome para come√ßar:</p>
      <input id="player-name-input" class="border-2 border-blue-500 rounded-lg px-4 py-2 w-full mb-4 text-center" maxlength="20" placeholder="Seu nome" autofocus>
      <button id="name-submit-button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg w-full mb-2">Continuar</button>
      <button id="view-ranking-name-modal" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg w-full mb-2">Ver Ranking</button>
    </div>
    <!-- Desenvolvido por -->
    <p class="mt-4 text-xs text-gray-500">
      Desenvolvido por <strong>J√∫lia Maretti Louvem</strong> e <strong>Yan Ribeiro de Paiva</strong>
    </p>
  </div>
</div>

<!-- Container do jogo -->
<div id="game-container" class="hidden">
  <!-- HUD -->
  <div class="p-3 bg-blue-200/80 text-gray-800 flex justify-between items-center z-20">
    <div class="flex items-center gap-2">
      <img src="logo 2.png" class="w-8 h-8 object-contain" alt="">
      <div>
        <h1 class="text-lg font-bold">Pirarucu Aventureiro</h1>
        <div class="text-xs">Jogador: <span id="player-name-display" class="font-bold">-</span></div>
        <div class="text-xs">N√≠vel: <span id="level">1</span></div>
      </div>
    </div>
    <div class="text-right">
      <div class="font-bold">Pontos: <span id="score">0</span></div>
      <div class="text-xs">Recorde: <span id="high-score">0</span></div>
    </div>
  </div>

  <!-- Canvas -->
  <div class="flex-1 relative overflow-hidden">
    <canvas id="gameCanvas" class="absolute inset-0 w-full h-full"></canvas>
  </div>

  <!-- Barra Hg -->
  <div class="absolute top-24 right-3 w-12 text-center z-20 pointer-events-none">
    <div class="text-white text-sm font-bold mb-1">Hg</div>
    <div class="relative h-64 w-6 bg-white bg-opacity-30 rounded-full overflow-hidden mx-auto border-2 border-white/50">
      <div id="mercury-bar" class="absolute bottom-0 w-full bg-red-600 transition-all duration-300" style="height:0%;"></div>
    </div>
    <div class="text-white text-xs mt-1"><span id="mercury-percent">0</span>%</div>
  </div>

  <div id="game-message"
       class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white text-3xl font-bold z-30 opacity-0 pointer-events-none text-center drop-shadow-lg">
  </div>
</div>

<!-- Modal In√≠cio -->
<div id="start-modal" class="modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-[120] hidden opacity-0">
  <div class="bg-white rounded-lg p-6 text-center shadow-xl w-full max-w-md mx-auto">
    <img src="logo 2.png" class="mx-auto mb-4 w-40 h-auto shadow" alt="">
    <h2 class="text-2xl font-bold mb-2">üêü Pirarucu Aventureiro</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-left mb-4">
      <p class="font-bold text-green-600">üü¢ Peixes Seguros:<br>Tambaqui, Pacu, Aruan√£</p>
      <p class="font-bold text-red-600">üî¥ Contaminados:<br>Tucunar√©, Surubim, Piranha</p>
    </div>
    <p class="mb-3 text-sm">Colete peixes seguros e evite os contaminados!</p>
    <p class="mb-6 text-sm">Arraste o dedo ou o mouse para mover o Pirarucu.</p>
    <button id="start-button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg w-full">Come√ßar</button>
    </div>
   <!-- Desenvolvido por -->
    <p class="mt-4 text-xs text-gray-500">
      Desenvolvido por <strong>J√∫lia Maretti Louvem</strong> e <strong>Yan Ribeiro de Paiva</strong>
    </p>
</div>

<!-- Game Over -->
<div id="game-over-modal" class="modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-[120] hidden opacity-0">
  <div class="bg-white rounded-lg p-6 text-center shadow-xl max-w-sm">
    <h2 class="text-2xl font-bold mb-2 text-red-600">Fim de Jogo</h2>
    <p>Jogador: <span id="final-player-name" class="font-bold">-</span></p>
    <p>Pontua√ß√£o: <span id="final-score" class="font-bold text-blue-600">0</span></p>
    <p>N√≠vel: <span id="final-level" class="font-bold">1</span></p>
    <button id="restart-button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg w-full mb-2">Jogar Novamente</button>
    <button id="view-ranking-button" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg w-full mb-2">Ver Ranking</button>
    <!-- Desenvolvido por -->
    <p class="mt-4 text-xs text-gray-500">
      Desenvolvido por <strong>J√∫lia Maretti Louvem</strong> e <strong>Yan Ribeiro de Paiva</strong>
    </p>
  </div>
</div>

<!-- Modal Ranking -->
<div id="ranking-modal" class="modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-[120] hidden opacity-0">
  <div class="bg-white rounded-lg p-6 text-center shadow-xl max-w-md w-full max-h-[80vh] overflow-y-auto">
    <h2 class="text-2xl font-bold mb-4 text-center">üèÜ Ranking de Jogadores</h2>
    <div id="ranking-list" class="space-y-2"></div>
    <button id="close-ranking-button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg w-full mt-4">Fechar</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const canvas = document.getElementById("gameCanvas"),
        ctx = canvas.getContext("2d");
  const scoreEl = document.getElementById("score"),
        levelEl = document.getElementById("level"),
        mercuryBarEl = document.getElementById("mercury-bar"),
        mercuryPercentEl = document.getElementById("mercury-percent"),
        nameModal = document.getElementById("name-modal"),
        startModal = document.getElementById("start-modal"),
        gameOverModal = document.getElementById("game-over-modal"),
        rankingModal = document.getElementById("ranking-modal"),
        nameSubmitButton = document.getElementById("name-submit-button"),
        playerNameInput = document.getElementById("player-name-input"),
        startButton = document.getElementById("start-button"),
        restartButton = document.getElementById("restart-button"),
        viewRankingButton = document.getElementById("view-ranking-button"),
        closeRankingButton = document.getElementById("close-ranking-button"),
        playerNameDisplay = document.getElementById("player-name-display");

  let playerName = "", player, score = 0, level = 1, mercury = 0, fish = [], gameRunning = false;

  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resizeCanvas);
  resizeCanvas();

  const fishData = [
    { name: "Tambaqui", points: 10, mercury: 0, color: "rgba(0, 255, 0, 0.5)" },
    { name: "Pacu", points: 10, mercury: 0, color: "rgba(0, 255, 0, 0.5)" },
    { name: "Aruan√£", points: 15, mercury: 0, color: "rgba(0, 255, 0, 0.5)" },
    { name: "Castanha", points: 20, mercury: -10, color: "rgba(255, 255, 0, 0.5)" },
    { name: "Tucunar√©", points: -5, mercury: 25, color: "rgba(255, 0, 0, 0.5)" },
    { name: "Surubim", points: -5, mercury: 30, color: "rgba(255, 0, 0, 0.5)" },
    { name: "Piranha", points: -5, mercury: 20, color: "rgba(255, 0, 0, 0.5)" }
  ];

  const fishImages = {
    'Aruan√£': new Image(),
    'Castanha': new Image(),
    'Pacu': new Image(),
    'Piranha': new Image(),
    'Surubim': new Image(),
    'Tambaqui': new Image(),
    'Tucunar√©': new Image()
  };

  fishImages['Aruan√£'].src = 'Aruana.png';
  fishImages['Castanha'].src = 'Castanha.png';
  fishImages['Pacu'].src = 'Pacu.png';
  fishImages['Piranha'].src = 'Piranha.png';
  fishImages['Surubim'].src = 'Surubim.png';
  fishImages['Tambaqui'].src = 'Tambaqui.png';
  fishImages['Tucunar√©'].src = 'Tucunare.png';

  player = { x: window.innerWidth / 2, y: window.innerHeight - 120, w: 160, h: 160, targetX: window.innerWidth / 2 };

  const img = new Image();
  img.src = "pirarucu m.png";

  function drawPlayer() {
