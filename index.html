<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>Pirarucu Aventureiro</title>

<meta name="theme-color" content="#1e40af">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">

<style>
Â  html, body {
Â  Â  margin: 0;
Â  Â  padding: 0;
Â  Â  overflow: hidden;
Â  Â  height: 100%;
Â  Â  width: 100%;
Â  Â  font-family: 'Nunito', sans-serif;
Â  Â  background-color: #0c4a6e;
Â  }

Â  #game-container {
Â  Â  position: fixed;
Â  Â  inset: 0;
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  background-color: #0c4a6e;
Â  }

Â  canvas {
Â  Â  display: block;
Â  Â  width: 100%;
Â  Â  height: 100%;
Â  Â  background-color: #1e40af; /* Azul MÃ©dio */
Â  }

Â  .modal { transition: opacity .3s ease-in-out; }
</style>
</head>

<body>

<!-- Modal Nome -->
<div id="name-modal" class="modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-[120]">
Â  <div class="rounded-lg p-6 text-center shadow-xl max-w-sm w-full bg-blue-100 border-4 border-blue-500">
Â  Â  <div class="p-4 shadow-md">
Â  Â  Â  <div class="flex justify-center mb-4 text-4xl">ğŸŸ</div>
Â  Â  Â  <h2 class="text-3xl font-extrabold mb-4 text-blue-800">Bem-vindo!</h2>
Â  Â  Â  <p class="mb-4 text-gray-600">Digite seu nome para comeÃ§ar:</p>
Â  Â  Â  <input id="player-name-input" class="border-2 border-blue-500 rounded-lg px-4 py-2 w-full mb-4 text-center focus:ring-blue-500 focus:border-blue-500" maxlength="20" placeholder="Seu nome" autofocus>
Â  Â  Â  <button id="name-submit-button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-xl w-full mb-3 shadow-lg transform transition duration-150 hover:scale-[1.02]">
Â  Â  Â  Â  Continuar
Â  Â  Â  </button>
Â  Â  Â  <button id="view-ranking-name-modal" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-xl w-full shadow-md">
Â  Â  Â  Â  Ver Ranking Local
Â  Â  Â  </button>
Â  Â  </div>
Â  </div>
</div>

<!-- Container do jogo -->
<div id="game-container" class="hidden">
Â  <!-- HUD -->
Â  <div class="p-3 bg-blue-900/90 text-white flex justify-between items-center z-20 border-b-4 border-blue-300">
Â  Â  <div class="flex items-center gap-3">
Â  Â  Â  <div class="text-3xl">ğŸ£</div>
Â  Â  Â  <div>
Â  Â  Â  Â  <h1 class="text-lg font-bold">Pirarucu Aventureiro</h1>
Â  Â  Â  Â  <div class="text-sm">Jogador: <span id="player-name-display" class="font-extrabold text-yellow-300">-</span></div>
Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div class="text-right">
Â  Â  Â  <div class="text-xl font-extrabold">Pontos: <span id="score">0</span></div>
Â  Â  Â  <div class="text-sm">NÃ­vel: <span id="level">1</span></div>
Â  Â  </div>
Â  </div>

Â  <!-- Canvas -->
Â  <div class="flex-1 relative overflow-hidden">
Â  Â  <canvas id="gameCanvas" class="absolute inset-0 w-full h-full"></canvas>
Â  </div>

Â  <!-- Barra Hg -->
Â  <div class="absolute top-24 right-3 w-12 text-center z-20 pointer-events-none">
Â  Â  <div class="text-white text-sm font-bold mb-1">Hg</div>
Â  Â  <div class="relative h-64 w-6 bg-white bg-opacity-30 rounded-full overflow-hidden mx-auto border-2 border-white/50 shadow-inner">
Â  Â  Â  <div id="mercury-bar" class="absolute bottom-0 w-full bg-red-600 transition-all duration-300" style="height:0%;"></div>
Â  Â  </div>
Â  Â  <div class="text-white text-xs mt-1"><span id="mercury-percent">0</span>%</div>
Â  </div>

Â  <div id="game-message"
Â  Â  Â  Â class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white text-3xl font-extrabold z-30 opacity-0 pointer-events-none text-center drop-shadow-2xl">
Â  </div>
</div>

<!-- Modal InÃ­cio -->
<div id="start-modal" class="modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-[120] hidden opacity-0">
Â  <div class="bg-blue-100 rounded-lg p-6 text-center shadow-xl w-full max-w-md mx-auto border-4 border-blue-500">
Â  Â  <div class="text-4xl mb-4">ğŸ </div>
Â  Â  <h2 class="text-3xl font-extrabold mb-4 text-blue-800">Pirarucu Aventureiro</h2>
Â  Â  <p class="mb-3 text-sm text-gray-700 font-bold">ğŸ¯ Colete peixes seguros e EVITE os contaminados!</p>
Â  Â  <p class="mb-6 text-sm text-gray-700">Arraste o dedo ou o mouse para mover o Pirarucu.</p>
Â  Â  <button id="start-button" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-xl w-full shadow-lg transform transition duration-150 hover:scale-[1.02]">
Â  Â  Â  ComeÃ§ar a Pescar!
Â  Â  </button>
Â  </div>
</div>

<!-- Game Over -->
<div id="game-over-modal" class="modal fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-[120] hidden opacity-0">
Â  <div class="bg-blue-100 rounded-lg p-6 text-center shadow-2xl max-w-sm border-4 border-red-600">
Â  Â  <h2 class="text-4xl font-extrabold mb-4 text-red-700">â˜ ï¸ FIM DE JOGO â˜ ï¸</h2>
Â  Â  <p class="text-lg mb-2">Jogador: <span id="final-player-name" class="font-extrabold text-blue-800">-</span></p>
Â  Â  <p class="text-2xl font-bold mb-4">PontuaÃ§Ã£o: <span id="final-score" class="text-green-600">0</span></p>
Â  Â  <p class="text-lg mb-6">NÃ­vel MÃ¡ximo: <span id="final-level" class="font-bold">1</span></p>
Â  Â  <button id="restart-button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-xl w-full mb-3 shadow-lg transform transition duration-150 hover:scale-[1.02]">
Â  Â  Â  Jogar Novamente
Â  Â  </button>
Â  Â  <button id="view-ranking-button" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-xl w-full shadow-md">
Â  Â  Â  Ver Ranking Local
Â  Â  </button>
Â  </div>
</div>

<!-- Ranking Modal -->
<div id="ranking-modal" class="modal fixed inset-0 bg-black/70 hidden flex items-center justify-center p-4 z-[130] opacity-0">
Â  <div class="bg-blue-100 rounded-lg p-6 text-center shadow-2xl max-w-md w-full border-4 border-blue-600">
Â  Â  <h2 class="text-3xl font-extrabold mb-4 text-blue-800">ğŸ† Ranking Local ğŸ†</h2>
Â  Â  <ol id="ranking-list" class="list-decimal list-inside text-left mx-auto max-w-xs mb-6 p-4 bg-white rounded-lg shadow-inner text-lg">
Â  Â  Â  <!-- Itens do ranking serÃ£o inseridos aqui -->
Â  Â  Â  <li class="text-gray-500">Nenhum recorde salvo.</li>
Â  Â  </ol>
Â  Â  <button id="close-ranking-modal" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-xl w-full shadow-md">Fechar</button>
Â  </div>
</div>


<script>
document.addEventListener("DOMContentLoaded", () => {
Â  const canvas = document.getElementById("gameCanvas"),
Â  Â  Â  Â  ctx = canvas.getContext("2d");
Â  const scoreEl = document.getElementById("score"),
Â  Â  Â  Â  levelEl = document.getElementById("level"),
Â  Â  Â  Â  mercuryBarEl = document.getElementById("mercury-bar"),
Â  Â  Â  Â  mercuryPercentEl = document.getElementById("mercury-percent"),
Â  Â  Â  Â  nameModal = document.getElementById("name-modal"),
Â  Â  Â  Â  startModal = document.getElementById("start-modal"),
Â  Â  Â  Â  gameOverModal = document.getElementById("game-over-modal"),
Â  Â  Â  Â  nameSubmitButton = document.getElementById("name-submit-button"),
Â  Â  Â  Â  playerNameInput = document.getElementById("player-name-input"),
Â  Â  Â  Â  startButton = document.getElementById("start-button"),
Â  Â  Â  Â  restartButton = document.getElementById("restart-button"),
Â  Â  Â  Â  viewRankingButton = document.getElementById("view-ranking-button"),
Â  Â  Â  Â  viewRankingNameModal = document.getElementById("view-ranking-name-modal"),
Â  Â  Â  Â  rankingModal = document.getElementById("ranking-modal"),
Â  Â  Â  Â  closeRankingModal = document.getElementById("close-ranking-modal"),
Â  Â  Â  Â  rankingList = document.getElementById("ranking-list"),
Â  Â  Â  Â  playerNameDisplay = document.getElementById("player-name-display");

Â  let playerName = "", player, score = 0, level = 1, mercury = 0, fish = [], gameRunning = false;

Â  // --- ConfiguraÃ§Ãµes Visuais e DimensÃµes ---
Â  const FISH_RADIUS = 60; // Raio base dos peixes (maior)
Â  const FISH_DRAW_SIZE = FISH_RADIUS * 2; // Tamanho de desenho (120x120 pixels)
Â  const HALO_RADIUS = 75; // Raio do halo
Â  const COLLISION_THRESHOLD = 110; // DistÃ¢ncia para colisÃ£o
Â  const PLAYER_W = 160;
Â  const PLAYER_H = 160;

Â  function resizeCanvas() {
Â  Â  canvas.width = window.innerWidth;
Â  Â  canvas.height = window.innerHeight;
Â  }
Â  window.addEventListener("resize", resizeCanvas);
Â  resizeCanvas();

Â  const fishData = [
Â  Â  { name: "Tambaqui", points: 10, mercury: 0, color: "#0f0" },
Â  Â  { name: "Pacu", points: 10, mercury: 0, color: "#0f0" },
Â  Â  { name: "AruanÃ£", points: 15, mercury: 0, color: "#0f0" },
Â  Â  { name: "Castanha", points: 20, mercury: -15, color: "#ff0" },
Â  Â  { name: "TucunarÃ©", points: -5, mercury: 25, color: "#f00" },
Â  Â  { name: "Surubim", points: -5, mercury: 30, color: "#f00" },
Â  Â  { name: "Piranha", points: -5, mercury: 20, color: "#f00" }
Â  ];
Â  
Â  // --- Carregamento de Imagens (Preparado para PNGs externas) ---

Â  // URL de Placeholder (IMAGEM SIMPLES CINZA)
Â  // NOTE: O usuÃ¡rio DEVE substituir esta URL pelo caminho real do arquivo PNG no servidor.
Â  const PLACEHOLDER_URL = 'https://placehold.co/100x100/AAAAAA/AAAAAA?text=';

Â  const fishImages = {};
Â  const imageNames = ["AruanÃ£", "Castanha", "Pacu", "Piranha", "Surubim", "Tambaqui", "TucunarÃ©"];

Â  imageNames.forEach(name => {
Â  Â  const img = new Image();
Â  Â  // Usa o PLACEHOLDER_URL. Substitua 'Aruana.png' pelo caminho real se necessÃ¡rio.
Â  Â  img.src = `${PLACEHOLDER_URL}${name}`; // Adiciona o nome como texto para distinguir
Â  Â  img.onerror = () => { console.error(`Erro ao carregar imagem: ${name}.png. Verifique o caminho.`); };
Â  Â  fishImages[name] = img;
Â  });
Â  
Â  // Imagem do Jogador (Pirarucu)
Â  const playerImg = new Image();
Â  playerImg.src = `${PLACEHOLDER_URL}Pirarucu`; // Use o caminho real: 'pirarucu m.png';
Â  
Â  player = { x: window.innerWidth / 2, y: window.innerHeight - 120, w: PLAYER_W, h: PLAYER_H, targetX: window.innerWidth / 2 };

Â  function drawPlayer() {
Â  Â  // Desenha a imagem do Pirarucu (Jogador)
Â  Â  if (playerImg.complete) {
Â  Â  Â  ctx.drawImage(playerImg, player.x - player.w / 2, player.y - player.h / 2, player.w, player.h);
Â  Â  } else {
Â  Â  Â  // Fallback: Desenha um quadrado de cor sÃ³lida se a imagem nÃ£o carregar
Â  Â  Â  ctx.fillStyle = "#ff6600"; 
Â  Â  Â  ctx.fillRect(player.x - player.w / 2, player.y - player.h / 2, player.w, player.h);
Â  Â  Â  ctx.fillStyle = "white";
Â  Â  Â  ctx.fillText("P", player.x, player.y);
Â  Â  }
Â  }

Â  let fishSpawnRate = 0.02;Â Â 
Â  let fishSpeed = 2 + level * 0.2;
Â  let castanhaChance = 0.05;

Â  function createFish() {
Â  Â  if (Math.random() < fishSpawnRate) {
Â  Â  Â  const isCastanha = Math.random() < castanhaChance;
Â  Â  Â  const availableFish = isCastanha ? [fishData.find(f => f.name === 'Castanha')] : fishData.filter(f => f.name !== 'Castanha');
Â  Â  Â  
Â  Â  Â  const d = availableFish[Math.floor(Math.random() * availableFish.length)];

Â  Â  Â  fish.push({ x: Math.random() * canvas.width, y: -50, dy: fishSpeed, data: d });

Â  Â  Â  castanhaChance = Math.max(0.01, castanhaChance - 0.005 * level);Â Â 
Â  Â  }
Â  }

Â  function drawFish(f) {
Â  Â  // 1. Desenha o cÃ­rculo de cor (base)
Â  Â  ctx.fillStyle = f.data.color;
Â  Â  ctx.beginPath();
Â  Â  ctx.arc(f.x, f.y, FISH_RADIUS, 0, Math.PI * 2);Â Â 
Â  Â  ctx.fill();

Â  Â  // 2. Halo com gradiente transparente
Â  Â  ctx.save();
Â  Â  const gradient = ctx.createRadialGradient(f.x, f.y, FISH_RADIUS, f.x, f.y, HALO_RADIUS);
Â  Â  let startColor;
Â  Â  
Â  Â  if (f.data.name === 'Castanha') {
Â  Â  Â  startColor = 'rgba(255, 255, 0, 0.7)'; // Amarelo forte
Â  Â  } else if (f.data.mercury > 0) {
Â  Â  Â  startColor = 'rgba(255, 0, 0, 0.4)'; // Vermelho suave para contaminados
Â  Â  } else {
Â  Â  Â  startColor = 'rgba(0, 255, 0, 0.3)'; // Verde suave para seguros
Â  Â  }

Â  Â  gradient.addColorStop(0, startColor);
Â  Â  gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
Â  Â  ctx.fillStyle = gradient;
Â  Â  ctx.beginPath();
Â  Â  ctx.arc(f.x, f.y, HALO_RADIUS, 0, Math.PI * 2); 
Â  Â  ctx.fill();
Â  Â  ctx.restore();

Â  Â  // 3. Desenha a imagem do peixe (PNG)
Â  Â  const img = fishImages[f.data.name];
Â  Â  if (img && img.complete) {
Â  Â  Â  // Usa FISH_DRAW_SIZE (120x120) para o desenho
Â  Â  Â  ctx.drawImage(img, f.x - FISH_RADIUS, f.y - FISH_RADIUS, FISH_DRAW_SIZE, FISH_DRAW_SIZE);Â Â 
Â  Â  } else {
Â  Â  Â  // Fallback: Exibe o nome se a imagem PNG falhar
Â  Â  Â  ctx.save();
Â  Â  Â  ctx.font = "18px Arial";
Â  Â  Â  ctx.fillStyle = "black";
Â  Â  Â  ctx.textAlign = "center";
Â  Â  Â  ctx.textBaseline = "middle";
Â  Â  Â  ctx.fillText(f.data.name, f.x, f.y);
Â  Â  Â  ctx.restore();
Â  Â  }
Â  }

Â  function checkCollision(f) {
Â  Â  const dx = f.x - player.x, dy = f.y - player.y, dist = Math.sqrt(dx * dx + dy * dy);
Â  Â  return dist < COLLISION_THRESHOLD;
Â  }

Â  function showMessage(msg, color) {
Â  Â  const el = document.getElementById("game-message");
Â  Â  el.textContent = msg;
Â  Â  el.style.color = color;
Â  Â  el.style.opacity = 1;
Â  Â  el.style.transition = 'opacity 0.2s';
Â  Â  setTimeout(() => el.style.opacity = 0, 1200);
Â  }

Â  function loop() {
Â  Â  if (!gameRunning) return;
Â  Â  ctx.clearRect(0, 0, canvas.width, canvas.height);
Â  Â  
Â  Â  player.x += (player.targetX - player.x) * 0.15;
Â  Â  
Â  Â  drawPlayer();
Â  Â  
Â  Â  for (let i = fish.length - 1; i >= 0; i--) {
Â  Â  Â  const f = fish[i];
Â  Â  Â  f.y += f.dy;
Â  Â  Â  drawFish(f);
Â  Â  Â  
Â  Â  Â  if (checkCollision(f)) {
Â  Â  Â  Â  score += f.data.points;
Â  Â  Â  Â  mercury = Math.max(0, Math.min(100, mercury + f.data.mercury));
Â  Â  Â  Â  showMessage(`${f.data.points > 0 ? '+' : ''}${f.data.points} pts`, f.data.mercury > 0 ? "#f00" : "#0f0");
Â  Â  Â  Â  fish.splice(i, 1);
Â  Â  Â  Â  if (mercury >= 100) {
Â  Â  Â  Â  Â  endGame();
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  } else if (f.y > canvas.height + 50) {
Â  Â  Â  Â  fish.splice(i, 1);
Â  Â  Â  }
Â  Â  }
Â  Â  
Â  Â  createFish();Â Â 
Â  Â  mercuryBarEl.style.height = mercury + "%";
Â  Â  mercuryPercentEl.textContent = mercury;
Â  Â  scoreEl.textContent = score;
Â  Â  if (score >= level * 100) levelUp();
Â  Â  requestAnimationFrame(loop);
Â  }

Â  function startGame() {
Â  Â  score = 0;
Â  Â  level = 1;
Â  Â  mercury = 0;
Â  Â  fish = [];
Â  Â  gameRunning = true;
Â  Â  startModal.classList.add("hidden");
Â  Â  document.getElementById("game-container").classList.remove("hidden");
Â  Â  resizeCanvas();
Â  Â  loop();
Â  }

Â  function levelUp() {
Â  Â  level++;
Â  Â  levelEl.textContent = level;
Â  Â  fishSpeed = 2 + level * 0.2;
Â  Â  fishSpawnRate = Math.min(0.1, fishSpawnRate + 0.005);
Â  Â  showMessage(`NÃ­vel ${level}!`, "#0f0");
Â  }

Â  function endGame() {
Â  Â  gameRunning = false;
Â  Â  document.getElementById("final-score").textContent = score;
Â  Â  document.getElementById("final-level").textContent = level;
Â  Â  document.getElementById("final-player-name").textContent = playerName;
Â  Â  gameOverModal.classList.remove("hidden");
Â  Â  gameOverModal.style.opacity = 1;
Â  Â  saveRanking();
Â  }

Â  function saveRanking() {
Â  Â  const ranking = JSON.parse(localStorage.getItem('ranking') || '[]');
Â  Â  ranking.push({ name: playerName, score, level });
Â  Â  ranking.sort((a, b) => b.score - a.score);
Â  Â  localStorage.setItem('ranking', JSON.stringify(ranking.slice(0, 10)));
Â  }
Â  
Â  function displayRankingModal() {
Â  Â  const ranking = JSON.parse(localStorage.getItem('ranking') || '[]');
Â  Â  rankingList.innerHTML = '';
Â  Â  
Â  Â  if (ranking.length === 0) {
Â  Â  Â  rankingList.innerHTML = '<li class="text-gray-500 text-center">Nenhum recorde salvo neste dispositivo.</li>';
Â  Â  } else {
Â  Â  Â  ranking.forEach((entry, index) => {
Â  Â  Â  Â  const li = document.createElement('li');
Â  Â  Â  Â  li.className = "py-1 border-b border-gray-200 last:border-b-0 flex justify-between items-center";
Â  Â  Â  Â  
Â  Â  Â  Â  const rankText = `${index + 1}. ${entry.name}`;
Â  Â  Â  Â  const scoreText = `${entry.score} pts (N${entry.level})`;
Â  Â  Â  Â  
Â  Â  Â  Â  li.innerHTML = `
Â  Â  Â  Â  Â  <span>${rankText}</span>
Â  Â  Â  Â  Â  <span class="font-bold text-blue-600">${scoreText}</span>
Â  Â  Â  Â  `;
Â  Â  Â  Â  rankingList.appendChild(li);
Â  Â  Â  });
Â  Â  }

Â  Â  rankingModal.classList.remove("hidden");
Â  Â  setTimeout(() => rankingModal.style.opacity = 1, 10);
Â  }

Â  // LIGAÃ‡ÃƒO DOS EVENTOS
Â  viewRankingButton.onclick = displayRankingModal;
Â  viewRankingNameModal.onclick = displayRankingModal;

Â  closeRankingModal.onclick = () => {
Â  Â  rankingModal.style.opacity = 0;
Â  Â  setTimeout(() => rankingModal.classList.add("hidden"), 300);
Â  };

Â  canvas.addEventListener("mousemove", e => player.targetX = e.clientX);
Â  canvas.addEventListener("touchmove", e => {
Â  Â  const t = e.touches[0];
Â  Â  if (t) player.targetX = t.clientX;
Â  });

Â  nameSubmitButton.onclick = () => {
Â  Â  const n = playerNameInput.value.trim();
Â  Â  if (!n) { showMessage("Digite seu nome!", "red"); return; }
Â  Â  playerName = n;
Â  Â  playerNameDisplay.textContent = n;
Â  Â  nameModal.style.opacity = 0;
Â  Â  setTimeout(() => nameModal.classList.add("hidden"), 300);
Â  Â  startModal.classList.remove("hidden");
Â  Â  startModal.style.opacity = 1;
Â  };

Â  playerNameInput.addEventListener("keydown", e => {
Â  Â  if (e.key === "Enter") nameSubmitButton.click();
Â  });

Â  startButton.onclick = startGame;
Â  restartButton.onclick = () => {
Â  Â  gameOverModal.style.opacity = 0;
Â  Â  setTimeout(() => gameOverModal.classList.add("hidden"), 300);
Â  Â  startGame();
Â  };
});
</script>

</body>
</html>
